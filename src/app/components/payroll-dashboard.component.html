<div class="payroll-dashboard">
  <!-- Left Navigation Panel -->
  <nav class="navigation-panel">
    <img
      class="logo"
      src="/agri-logo.svg"
      alt="I'm a logo woohoo"
      width="40"
      height="40"
    />
    <ul class="nav-items">
      @for (item of navigationItems(); track item.id) {
        <li class="nav-item" [class.active]="item.active">
          <button>
            <mat-icon class="nav-icon">home</mat-icon>
            <span class="nav-label">{{ item.label }}</span>
          </button>
        </li>
      }
    </ul>
  </nav>

  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Content Grid -->
    <div class="content-grid">
      <!-- Employee Information Panel (Left) -->
      <aside class="employee-panel">
        <div class="title-section">
          <button class="back-button">
            <mat-icon>arrow_back</mat-icon>
          </button>
          <h1 class="employee-name">{{ employee().name }}</h1>
        </div>

        <div class="employee-info">
          <div class="employee-number">
            <p>No.</p>
            <strong>
              {{ employee().employeeNumber }}
            </strong>
          </div>
          <div class="employee-team">
            <p>Team</p>
            <strong>
              {{ employee().team }}
            </strong>
          </div>
        </div>

        <hr class="divider" />

        <h2 class="panel-title">Overview</h2>

        <!-- Summary Cards -->
        <div class="summary-cards">
          <div class="summary-card earnings">
            <div class="card-icon card-icon--green">
              <mat-icon>trending_up</mat-icon>
            </div>
            <div>
              <p class="card-label">Total Earnings</p>
              <p class="card-amount">
                {{ formatCurrency(summary().totalEarnings) }}
              </p>
            </div>
          </div>

          <div class="summary-card deductions">
            <div class="card-icon card-icon--red">
              <mat-icon>trending_down</mat-icon>
            </div>
            <div>
              <p class="card-label">Total Deductions</p>
              <p class="card-amount">
                {{ formatCurrency(summary().totalDeductions) }}
              </p>
            </div>
          </div>

          <div class="summary-card net">
            <div class="card-icon card-icon--blue">
              <mat-icon>account_balance</mat-icon>
            </div>
            <div>
              <p class="card-label">Net total</p>
              <p class="card-amount">
                {{ formatCurrency(summary().netTotal) }}
              </p>
            </div>
          </div>
        </div>

        <!-- Detailed Deductions -->
        <div class="summary-cards">
          <div class="summary-card">
            <div class="card-icon card-icon--secondary">
              <mat-icon>description</mat-icon>
            </div>
            <div>
              <p class="card-label">UIF</p>
              <p class="card-amount">{{ formatCurrency(summary().uif) }}</p>
            </div>
          </div>
          <div class="summary-card">
            <div class="card-icon card-icon--secondary">
              <mat-icon>payments</mat-icon>
            </div>
            <div>
              <p class="card-label">PAYE</p>
              <p class="card-amount">{{ formatCurrency(summary().paye) }}</p>
            </div>
          </div>
          <div class="summary-card">
            <div class="card-icon card-icon--secondary">
              <mat-icon>point_of_sale</mat-icon>
            </div>
            <div>
              <p class="card-label">Total</p>
              <p class="card-amount">
                {{ formatCurrency(summary().total) }}
              </p>
            </div>
          </div>
        </div>
      </aside>

      <!-- Data Table (Right) - HIGHEST PRIORITY -->
      <section class="data-table-section">
        <header class="header">
          <div class="header-center">
            <div class="search-container">
              <input
                type="text"
                placeholder="Search"
                class="search-input"
                [(ngModel)]="searchTerm"
                (input)="onSearchChange()"
              />
              <span class="search-icon">üîç</span>
            </div>
          </div>

          <div class="header-right">
            <button class="btn btn-secondary">Secondary</button>
            <button class="btn btn-primary">Primary</button>
          </div>
        </header>
        <div class="table-container">
          <table class="earnings-table">
            <thead>
              <tr>
                <th class="sortable" (click)="onSort('name')">
                  Name
                  @if (getSortState().column === 'name') {
                    <span class="sort-icon">{{
                      getSortState().direction === 'asc' ? '‚Üì' : '‚Üë'
                    }}</span>
                  }
                </th>
                <th>Description</th>
                <th>Type</th>
                <th class="sortable" (click)="onSort('quantity')">
                  Quantity
                  @if (getSortState().column === 'quantity') {
                    <span class="sort-icon">{{
                      getSortState().direction === 'asc' ? '‚Üì' : '‚Üë'
                    }}</span>
                  }
                </th>
                <th class="sortable" (click)="onSort('rate')">
                  Rate
                  @if (getSortState().column === 'rate') {
                    <span class="sort-icon">{{
                      getSortState().direction === 'asc' ? '‚Üì' : '‚Üë'
                    }}</span>
                  }
                </th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              @for (earning of earnings(); track earning.id) {
                <tr class="table-row" [class.highlighted]="$first">
                  <td class="name-cell">
                    @if (earning.hasInfoIcon) {
                      <span class="info-icon">‚ö†Ô∏è</span>
                    }
                    {{ earning.name }}
                  </td>
                  <td class="description-cell">{{ earning.description }}</td>
                  <td class="type-cell">{{ earning.type }}</td>
                  <td class="quantity-cell">{{ earning.quantity }}</td>
                  <td class="rate-cell">
                    {{ formatCurrency(earning.rate) }}
                    @if (earning.rate) {
                      <span class="edit-icon">‚úèÔ∏è</span>
                    }
                  </td>
                  <td class="actions-cell">
                    <a href="#" class="action-link">Primary Action</a>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </main>

  <!-- Right Secondary Actions Panel -->
  <aside class="secondary-actions">
    <div class="action-item">
      <button>
        <mat-icon class="nav-icon">school</mat-icon>
        <span class="action-label">Action 1</span>
      </button>
    </div>
    <div class="action-item active">
      <button>
        <mat-icon class="nav-icon">school</mat-icon>
        <span class="action-label">Action 2</span>
      </button>
    </div>
  </aside>
</div>
